services:
  mysql:
    image: mysql:8.0
    container_name: auth-mysql-dev
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: genosentinel
    ports:
      - "3307:3306"  # âœ… CORREGIDO: 3307:3306 (no 3311:3310)
    networks:
      - auth-network

  auth-service:
    build: .
    container_name: genosentinel-auth
    ports:
      - "3011:3010"
    environment:
      - NODE_ENV=production
      - JWT_SECRET=genosentinel_docker_secret_2024
      - DB_HOST=mysql
      - DB_PORT=3306
      - DB_USER=root
      - DB_PASSWORD=root
      - DB_NAME=genosentinel
    depends_on:
      - mysql
    networks:
      - auth-network

networks:
  auth-network:
    driver: bridge